(()=>{"use strict";var e={2110:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var o=n(6665),a=n(5991),r=n(5479),i=n(4834),l=n(467),s=n(296),d=n(3668),u=n(3929),c=n(6283),f=n(5648),g=n(1690),h=n(530),p=n(3117),x=n(8257),y=n(5259),m=n(397),b="media_capture_high_quality",j="media_capture_auto_upload";function v(e){var t=e.navigation,n=(0,o.useState)(!1),r=(0,s.default)(n,2),i=r[0],d=(r[1],(0,o.useState)(!1)),v=(0,s.default)(d,2),C=v[0],S=v[1],k=(0,o.useState)(!1),T=(0,s.default)(k,2),B=T[0],z=T[1],I=(0,o.useRef)(null);(0,o.useEffect)((function(){var e=function(){var e=(0,l.default)((function*(){try{var e=yield y.default.getItem(b),t=yield y.default.getItem(j);e&&S("true"===e),t&&z("true"===t)}catch(n){console.error("Error loading settings:",n)}}));return function(){return e.apply(this,arguments)}}();return e(),t.addListener("focus",e)}),[t]);return i?(0,m.jsx)(u.default,{style:w.container,children:(0,m.jsx)(h.default,{size:"large",color:"#ffffff"})}):(0,m.jsxs)(u.default,{style:w.container,children:[(0,m.jsx)(p.default,{style:"light"}),(0,m.jsxs)(u.default,{style:w.header,children:[(0,m.jsx)(u.default,{style:w.headerLeft}),(0,m.jsx)(c.default,{style:w.headerTitle,children:"Media Capture App"}),(0,m.jsx)(f.default,{style:w.settingsButton,onPress:function(){t.navigate("Settings")},children:(0,m.jsx)(x.default,{name:"settings-outline",size:24,color:"white"})})]}),(0,m.jsxs)(u.default,{style:w.webCameraContainer,children:[(0,m.jsx)(c.default,{style:w.messageText,children:"Camera functionality is limited on web."}),(0,m.jsx)(c.default,{style:w.messageText,children:"Please upload a photo or video from your device:"}),(0,m.jsxs)(u.default,{style:w.settingsInfo,children:[(0,m.jsxs)(c.default,{style:w.settingsInfoText,children:["Quality: ",C?"High":"Standard"]}),(0,m.jsxs)(c.default,{style:w.settingsInfoText,children:["Auto-Upload: ",B?"On":"Off"]})]}),"web"===a.default.OS&&(0,m.jsx)("input",{type:"file",ref:I,style:{display:"none"},onChange:function(e){try{var n=e.target.files[0];if(!n)return;var o=n.type.startsWith("image")?"photo":"video",a=URL.createObjectURL(n);console.log("File selected:",n.name,"Type:",o),t.navigate("Preview",{mediaUri:a,mediaType:o,autoUpload:B,webFile:{name:n.name,size:n.size,type:n.type}})}catch(r){console.error("Error selecting file:",r),g.default.alert("Error","Failed to select media file")}}}),(0,m.jsxs)(u.default,{style:w.buttonContainer,children:[(0,m.jsxs)(f.default,{style:w.uploadButton,onPress:function(){I.current&&(I.current.accept="image/*",I.current.click())},accessibilityLabel:"Upload a photo",children:[(0,m.jsx)(x.default,{name:"camera",size:36,color:"white"}),(0,m.jsx)(c.default,{style:w.buttonText,children:"Upload Photo"})]}),(0,m.jsxs)(f.default,{style:w.uploadButton,onPress:function(){I.current&&(I.current.accept="video/*",I.current.click())},accessibilityLabel:"Upload a video",children:[(0,m.jsx)(x.default,{name:"videocam",size:36,color:"white"}),(0,m.jsx)(c.default,{style:w.buttonText,children:"Upload Video"})]})]})]})]})}var w=d.default.create({container:{flex:1,backgroundColor:"black"},header:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingVertical:15,paddingHorizontal:20,backgroundColor:"#222"},headerLeft:{width:40},headerTitle:{color:"#4A90E2",fontSize:20,fontWeight:"bold",textAlign:"center"},settingsButton:{padding:8,borderRadius:20,backgroundColor:"rgba(255, 255, 255, 0.1)"},webCameraContainer:{flex:1,justifyContent:"center",alignItems:"center",padding:20},messageText:{color:"white",fontSize:16,textAlign:"center",marginBottom:15},settingsInfo:{flexDirection:"row",backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:10,padding:10,marginVertical:15},settingsInfoText:{color:"#ddd",fontSize:14,marginHorizontal:10},buttonContainer:{flexDirection:"row",justifyContent:"space-around",width:"100%",marginTop:30},uploadButton:{backgroundColor:"#4A90E2",padding:20,borderRadius:10,alignItems:"center",width:"45%"},buttonText:{color:"white",fontSize:16,marginTop:10}}),C=n(484),S="media_capture_webhook_url";function k(e){var t=e.route,n=e.navigation,r=t.params,i=r.mediaUri,d=r.mediaType,b=r.webFile,j=r.autoUpload,v=(0,o.useState)(!1),w=(0,s.default)(v,2),k=w[0],B=w[1],z=(0,o.useState)(0),I=(0,s.default)(z,2),R=I[0],U=I[1],L=(0,o.useState)(null),P=(0,s.default)(L,2),O=P[0],E=P[1],_=o.useRef(null);(0,o.useEffect)((function(){return function(){"web"===a.default.OS&&i&&i.startsWith("blob:")&&URL.revokeObjectURL(i)}}),[i]),(0,o.useEffect)((function(){var e=function(){var e=(0,l.default)((function*(){try{var e=yield y.default.getItem(S);e?(console.log("Loaded webhook URL:",e),E(e),!0!==j||k||(console.log("Auto-upload requested"),setTimeout((function(){return A()}),500))):console.log("No webhook URL configured")}catch(t){console.error("Error loading webhook URL:",t)}}));return function(){return e.apply(this,arguments)}}();e()}),[j]);var D,A=function(){if(O){console.log("Uploading file:",(null==b?void 0:b.name)||"unknown file","to",O),B(!0),U(0);var e=setInterval((function(){U((function(t){var o=t+10;return o>=100?(clearInterval(e),setTimeout((function(){B(!1),g.default.alert("Success","Media uploaded successfully!",[{text:"OK",onPress:function(){return n.navigate("Camera")}}])}),500),100):o}))}),300);Math.random()<.1&&(clearInterval(e),setTimeout((function(){B(!1),g.default.alert("Error","Upload failed! Please try again.")}),1e3))}else g.default.alert("Configuration Needed","Please configure a webhook URL in settings before uploading.",[{text:"Cancel",style:"cancel"},{text:"Go to Settings",onPress:function(){return n.navigate("Settings")}}])};return(0,m.jsxs)(u.default,{style:T.container,children:[(0,m.jsx)(p.default,{style:"light"}),(0,m.jsxs)(u.default,{style:T.header,children:[(0,m.jsx)(f.default,{style:T.headerButton,onPress:function(){return n.goBack()},disabled:k,children:(0,m.jsx)(x.default,{name:"arrow-back",size:24,color:"white"})}),(0,m.jsx)(c.default,{style:T.headerTitle,children:"Preview"}),(0,m.jsx)(f.default,{style:T.headerButton,onPress:function(){n.navigate("Settings")},disabled:k,children:(0,m.jsx)(x.default,{name:"settings-outline",size:24,color:"white"})})]}),(0,m.jsx)(u.default,{style:T.mediaContainer,children:"photo"===d?(0,m.jsx)(C.default,{source:{uri:i},style:T.mediaPreview,resizeMode:"contain"}):"web"===a.default.OS?(0,m.jsx)("video",{ref:_,src:i,style:{width:"100%",height:"100%",objectFit:"contain"},controls:!0}):(0,m.jsx)(c.default,{style:T.errorText,children:"Video preview not available"})}),(0,m.jsxs)(u.default,{style:T.infoContainer,children:[(0,m.jsxs)(c.default,{style:T.infoText,children:["Type: ","photo"===d?"Photo":"Video"]}),b&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(c.default,{style:T.infoText,children:["Size: ",(D=b.size,D?D<1024?D+" B":D<1048576?(D/1024).toFixed(1)+" KB":(D/1048576).toFixed(1)+" MB":"Unknown size")]}),b.name&&(0,m.jsxs)(c.default,{style:T.infoText,children:["Name: ",b.name]})]}),O?(0,m.jsxs)(c.default,{style:T.infoText,numberOfLines:1,ellipsizeMode:"middle",children:["Webhook: ",O]}):(0,m.jsx)(c.default,{style:T.warningText,children:"No webhook URL configured"})]}),k&&(0,m.jsxs)(u.default,{style:T.progressContainer,children:[(0,m.jsx)(h.default,{size:"small",color:"#ffffff"}),(0,m.jsxs)(c.default,{style:T.progressText,children:["Uploading: ",R,"%"]})]}),(0,m.jsxs)(u.default,{style:T.actionButtonsContainer,children:[(0,m.jsxs)(f.default,{style:[T.actionButton,T.cancelButton,k&&T.disabledButton],onPress:function(){n.navigate("Camera")},disabled:k,accessibilityLabel:"Cancel and return to camera",children:[(0,m.jsx)(x.default,{name:"close-circle",size:24,color:"white"}),(0,m.jsx)(c.default,{style:T.actionButtonText,children:"Cancel"})]}),(0,m.jsxs)(f.default,{style:[T.actionButton,T.uploadButton,k&&T.disabledButton],onPress:A,disabled:k,accessibilityLabel:"Upload media",children:[(0,m.jsx)(x.default,{name:"cloud-upload",size:24,color:"white"}),(0,m.jsx)(c.default,{style:T.actionButtonText,children:k?"Uploading...":"Upload"})]})]})]})}var T=d.default.create({container:{flex:1,backgroundColor:"#000"},header:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingTop:40,paddingBottom:10,paddingHorizontal:15,backgroundColor:"rgba(0, 0, 0, 0.5)"},headerButton:{padding:8,borderRadius:20,backgroundColor:"rgba(0, 0, 0, 0.3)"},headerTitle:{fontSize:18,fontWeight:"bold",color:"white"},mediaContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#111"},mediaPreview:{width:"100%",height:"100%"},errorText:{color:"#ff6b6b",fontSize:16},infoContainer:{padding:15,backgroundColor:"rgba(0, 0, 0, 0.7)"},infoText:{color:"white",fontSize:14,marginBottom:5},warningText:{color:"#ffab00",fontSize:14,marginBottom:5},progressContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",padding:10,backgroundColor:"rgba(0, 0, 0, 0.7)"},progressText:{color:"white",marginLeft:10},actionButtonsContainer:{flexDirection:"row",justifyContent:"space-around",padding:20,backgroundColor:"rgba(0, 0, 0, 0.8)"},actionButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",padding:12,borderRadius:25,width:"45%"},cancelButton:{backgroundColor:"#555"},uploadButton:{backgroundColor:"#4CAF50"},disabledButton:{opacity:.5},actionButtonText:{color:"white",fontSize:16,marginLeft:8}}),B=n(6773),z=n(4037),I=n(368),R=n(4767),U="media_capture_webhook_url",L="media_capture_high_quality",P="media_capture_auto_upload";function O(e){var t=e.navigation,n=(0,o.useState)("https://example.com/api/media-upload"),r=(0,s.default)(n,2),i=r[0],d=r[1],h=(0,o.useState)(!1),b=(0,s.default)(h,2),j=b[0],v=b[1],w=(0,o.useState)(!1),C=(0,s.default)(w,2),S=C[0],k=C[1],T=(0,o.useState)(!1),O=(0,s.default)(T,2),_=O[0],D=O[1];(0,o.useEffect)((function(){var e=function(){var e=(0,l.default)((function*(){try{var e=yield y.default.getItem(U),t=yield y.default.getItem(L),n=yield y.default.getItem(P);e&&d(e),t&&v("true"===t),n&&k("true"===n)}catch(o){console.error("Error loading settings:",o)}}));return function(){return e.apply(this,arguments)}}();e()}),[]);var A=function(){var e=(0,l.default)((function*(){if(i.trim()){D(!0);try{yield y.default.setItem(U,i),yield y.default.setItem(L,String(j)),yield y.default.setItem(P,String(S)),g.default.alert("Success","Settings saved successfully",[{text:"OK",onPress:function(){return t.goBack()}}])}catch(e){console.error("Error saving settings:",e),g.default.alert("Error","Failed to save settings")}finally{D(!1)}}else g.default.alert("Error","Webhook URL cannot be empty")}));return function(){return e.apply(this,arguments)}}();return(0,m.jsxs)(R.default,{style:E.container,behavior:"ios"===a.default.OS?"padding":"height",children:[(0,m.jsx)(p.default,{style:"light"}),(0,m.jsxs)(u.default,{style:E.header,children:[(0,m.jsx)(f.default,{style:E.backButton,onPress:function(){return t.goBack()},children:(0,m.jsx)(x.default,{name:"arrow-back",size:24,color:"white"})}),(0,m.jsx)(c.default,{style:E.headerTitle,children:"Settings"}),(0,m.jsx)(u.default,{style:E.backButton})]}),(0,m.jsxs)(I.default,{style:E.settingsContainer,children:[(0,m.jsxs)(u.default,{style:E.settingSection,children:[(0,m.jsx)(c.default,{style:E.settingLabel,children:"Webhook URL"}),(0,m.jsx)(B.default,{style:E.textInput,value:i,onChangeText:d,placeholder:"Enter webhook URL",placeholderTextColor:"#999",autoCapitalize:"none",autoCorrect:!1}),(0,m.jsx)(c.default,{style:E.settingDescription,children:"The URL where captured media will be uploaded"})]}),(0,m.jsxs)(u.default,{style:E.settingRow,children:[(0,m.jsxs)(u.default,{children:[(0,m.jsx)(c.default,{style:E.settingLabel,children:"High Quality"}),(0,m.jsx)(c.default,{style:E.settingDescription,children:"Capture photos and videos in higher quality"})]}),(0,m.jsx)(z.default,{value:j,onValueChange:v,trackColor:{false:"#767577",true:"#4A90E2"},thumbColor:"#f4f3f4"})]}),(0,m.jsxs)(u.default,{style:E.settingRow,children:[(0,m.jsxs)(u.default,{children:[(0,m.jsx)(c.default,{style:E.settingLabel,children:"Auto Upload"}),(0,m.jsx)(c.default,{style:E.settingDescription,children:"Automatically upload media after capture"})]}),(0,m.jsx)(z.default,{value:S,onValueChange:k,trackColor:{false:"#767577",true:"#4A90E2"},thumbColor:"#f4f3f4"})]}),(0,m.jsx)(f.default,{style:E.resetButton,onPress:function(){g.default.alert("Reset Settings","Are you sure you want to reset all settings to default values?",[{text:"Cancel",style:"cancel"},{text:"Reset",style:"destructive",onPress:function(){d("https://example.com/api/media-upload"),v(!1),k(!1)}}])},children:(0,m.jsx)(c.default,{style:E.resetButtonText,children:"Reset to Defaults"})})]}),(0,m.jsx)(f.default,{style:E.saveButton,onPress:A,disabled:_,children:(0,m.jsx)(c.default,{style:E.saveButtonText,children:_?"Saving...":"Save Settings"})})]})}var E=d.default.create({container:{flex:1,backgroundColor:"#222"},header:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingTop:40,paddingBottom:10,paddingHorizontal:15,backgroundColor:"#333"},backButton:{padding:10,width:44,height:44,justifyContent:"center",alignItems:"center"},headerTitle:{fontSize:20,fontWeight:"bold",color:"white"},settingsContainer:{flex:1,padding:15},settingSection:{marginBottom:25},settingRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:25},settingLabel:{fontSize:16,fontWeight:"bold",color:"white",marginBottom:8},settingDescription:{fontSize:14,color:"#aaa",marginBottom:5},textInput:{backgroundColor:"#444",color:"white",padding:12,borderRadius:5,fontSize:16,marginVertical:8},resetButton:{alignItems:"center",padding:12,marginTop:10,marginBottom:20},resetButtonText:{color:"#ff6b6b",fontSize:16},saveButton:{backgroundColor:"#4A90E2",padding:15,alignItems:"center",margin:15,borderRadius:5},saveButtonText:{color:"white",fontSize:18,fontWeight:"bold"}}),_=(0,i.createStackNavigator)();function D(){return(0,m.jsx)(r.NavigationContainer,{children:(0,m.jsxs)(_.Navigator,{initialRouteName:"Camera",screenOptions:{headerShown:!1,cardStyle:{backgroundColor:"black"},animationEnabled:!0},children:[(0,m.jsx)(_.Screen,{name:"Camera",component:v,options:{gestureEnabled:!1}}),(0,m.jsx)(_.Screen,{name:"Preview",component:k,options:{gestureEnabled:!0,gestureDirection:"horizontal",presentation:"modal"}}),(0,m.jsx)(_.Screen,{name:"Settings",component:O,options:{gestureEnabled:!0,animationEnabled:!0,presentation:"modal"}})]})})}a.default.OS;function A(){return console.log("Running on platform: "+a.default.OS),(0,m.jsx)(D,{})}}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,(()=>{var e=[];n.O=(t,o,a,r)=>{if(!o){var i=1/0;for(u=0;u<e.length;u++){for(var[o,a,r]=e[u],l=!0,s=0;s<o.length;s++)(!1&r||i>=r)&&Object.keys(n.O).every((e=>n.O[e](o[s])))?o.splice(s--,1):(l=!1,r<i&&(i=r));if(l){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,a,r]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var a,r,[i,l,s]=o,d=0;if(i.some((t=>0!==e[t]))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(s)var u=s(n)}for(t&&t(o);d<i.length;d++)r=i[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=n.O(void 0,[108],(()=>n(5036)));o=n.O(o)})();
//# sourceMappingURL=main.eeeae622.js.map